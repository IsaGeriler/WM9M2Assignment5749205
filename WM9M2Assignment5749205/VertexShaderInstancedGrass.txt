cbuffer staticInstacedMeshBuffer : register(b0) {
	float4x4 VP;
	float Time;
};

struct VS_INPUT {
	float4 Pos : POSITION;
	float3 Normal : NORMAL;
	float3 Tangent : TANGENT;
	float2 TexCoords : TEXCOORD;
	float4x4 World : WORLD;
};

struct PS_INPUT {
	float4 Pos : SV_POSITION;
	float3 Normal : NORMAL;
	float3 Tangent : TANGENT;
	float2 TexCoords : TEXCOORD;
};

PS_INPUT VS(VS_INPUT input) {
	// Wind Attributes
	float speed = 1.5;
	float frequency = 0.5;
	float amplitude = 0.2;

	float sway = sin(Time * speed + input.Pos.y * frequency) * amplitude;
	float weight = input.Pos.y;

	float3 position = input.Pos.xyz;
	position.x += sway * weight;

	PS_INPUT output;
	output.Pos = mul(float4(position, 1.0), input.World);
	output.Pos = mul(output.Pos, VP);
	output.Normal = mul(input.Normal, (float3x3)input.World);
	output.Tangent = mul(input.Tangent, (float3x3)input.World);
	output.TexCoords = input.TexCoords;
	return output;
}